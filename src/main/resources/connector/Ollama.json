{
  "$schema": "https://unpkg.com/@camunda/zeebe-element-templates-json-schema/resources/schema.json",
  "name": "Ollama",
  "id": "Template_qhwdgj6",
  "version": 3,
  "description": "infer local ai models through Ollama",
  "icon": {
    "contents": "data:image/png;base64,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"
  },
  "appliesTo": [
    "bpmn:Task"
  ],
  "category": {
    "id": "connectors",
    "name": "Connectors"
  },
  "elementType": {
    "value": "bpmn:ServiceTask"
  },
  "groups": [
    {
      "id": "model",
      "label": "Model Inference"
    },
    {
      "id": "prompt",
      "label": "Prompt"
    },
    {
      "id": "attachments",
      "label": "Attachments"
    },
    {
      "id": "output",
      "label": "Output mapping"
    }
  ],
  "properties": [
    {
      "type": "Hidden",
      "value": "com.ollama.connector",
      "binding": {
        "property": "type",
        "type": "zeebe:taskDefinition"
      }
    },
    {
      "group": "model",
      "type": "String",
      "label": "api endpoint",
      "feel": "optional",
      "optional": false,
      "value": "http://localhost:11434/api",
      "binding": {
        "type": "zeebe:input",
        "name": "apiBaseUrl"
      }
    },
    {
      "id": "authentication",
      "group": "model",
      "binding": {
        "name": "authenticationType",
        "type": "zeebe:input"
      },
      "type": "Dropdown",
      "label": "authentication",
      "choices": [
        {
          "name": "none",
          "value": "none"
        },
        {
          "name": "basicAuth",
          "value": "basicAuth"
        }
      ]
    },
    {
      "group": "model",
      "type": "String",
      "label": "client id",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "apiClientId"
      },
      "optional": false,
      "condition": {
        "allMatch": [
          {
            "property": "authentication",
            "equals": "basicAuth"
          }
        ]
      }
    },
    {
      "group": "model",
      "type": "String",
      "label": "client secret",
      "feel": "optional",
      "optional": false,
      "binding": {
        "type": "zeebe:input",
        "name": "apiClientSecret"
      },
      "condition": {
        "allMatch": [
          {
            "property": "authentication",
            "equals": "basicAuth"
          }
        ]
      }
    },
    {
      "group": "model",
      "label": "Select Model",
      "type": "String",
      "feel": "optional",
      "optional": false,
      "binding": {
        "type": "zeebe:input",
        "name": "model"
      }
    },
    {
      "id": "operationMode",
      "group": "model",
      "label": "Operation Mode",
      "description": "specify the ai operation mode",
      "binding": {
        "name": "operationMode",
        "type": "zeebe:input"
      },
      "type": "Dropdown",
      "choices": [
        {
          "name": "Chatcompletion",
          "value": "chatcompletion"
        },
        {
          "name": "Agentic",
          "value": "agentic"
        }
      ],
      "value": "chatcompletion"
    },
    {
      "group": "prompt",
      "label": "System prompt",
      "type": "Text",
      "optional": true,
      "feel": "optional",
      "binding": {
        "name": "systemPrompt",
        "type": "zeebe:input"
      }
    },
    {
      "group": "prompt",
      "label": "Prompt",
      "type": "Text",
      "optional": false,
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "userPrompt"
      }
    },
    {
      "group": "prompt",
      "label": "action options",
      "type": "String",
      "feel": "optional",
      "description": "list possible action ids to be returned",
      "binding": {
        "type": "zeebe:input",
        "name": "possibleActions"
      },
      "condition": {
        "property": "operationMode",
        "equals": "agentic",
        "type": "simple"
      }
    },
    {
      "id": "attachDocument",
      "label": "Document",
      "group": "attachments",
      "feel": "optional",
      "binding": {
        "name": "attachment.document",
        "type": "zeebe:input"
      },
      "optional": true,
      "type": "String"
    },
    {
      "id": "resultVariable",
      "label": "Result Variable",
      "description": "Name of the variable to store the response in",
      "group": "output",
      "binding": {
        "key": "resultExpression",
        "type": "zeebe:taskHeader"
      }
    },
    {
      "id": "resultExpression",
      "label": "Result expression",
      "description": "Expression to map the response into process variables",
      "feel": "required",
      "group": "output",
      "binding": {
        "key": "resultExpression",
        "type": "zeebe:taskHeader"
      },
      "type": "Text"
    },
    {
      "id": "responseFormat",
      "group": "output",
      "label": "Response Format",
      "description": "specify the response format",
      "binding": {
        "name": "responseFormat",
        "type": "zeebe:input"
      },
      "type": "Dropdown",
      "choices": [
        {
          "name": "Text",
          "value": "text"
        },
        {
          "name": "JSON",
          "value": "json"
        }
      ],
      "value": "text"
    },
    {
      "id": "jsonSchema",
      "label": "JSON Schema",
      "optional": true,
      "value": "",
      "description": "provide the optional JSON schema the LLM should try to respond with.",
      "feel": "required",
      "group": "output",
      "binding": {
        "name": "jsonSchema",
        "type": "zeebe:input"
      },
      "condition": {
        "property": "responseFormat",
        "equals": "json",
        "type": "simple"
      },
      "tooltip": "Ollama accepts formatting like the following example: {\n  \"type\":\"object\",\n  \"properties\": {\n    \"name\": {\n      \"type\":\"string\"\n    }\n  },\n  \"required\": [\n    \"name\"\n  ]\n}",
      "type": "String"
    }
  ]
}